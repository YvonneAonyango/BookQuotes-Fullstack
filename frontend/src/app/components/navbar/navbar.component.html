<nav class="navbar">
  <div class="navbar-container">
    <!-- Left Section: Brand & Navigation -->
    <div class="navbar-left">
      <a routerLink="/" class="navbar-brand">
        <span class="home-icon">ğŸ </span>
        <span class="brand-text">{{ 'brand' | translate }}</span>
      </a>
      
      <div class="navbar-links">
        <div class="nav-item-container">
          <a routerLink="/books" class="nav-link" (click)="closeOnNavigate()">
            <div class="link-content">
              {{ 'books' | translate }}
            </div>
          </a>
        </div>
        
        <div class="nav-item-container">
          <a routerLink="/quotes" class="nav-link" (click)="closeOnNavigate()">
            <div class="link-content">
              {{ 'quotes' | translate }}
            </div>
          </a>
        </div>
      </div>
    </div>

    <!-- Right Section: Controls & Auth -->
    <div class="navbar-right">
      <!-- Language Selector -->
      <div class="nav-item-container dropdown-wrapper" #dropdown>
        <button class="dropdown-btn" (click)="toggleDropdown()">
          <div class="btn-content">
            <span class="flag">{{ currentLanguage === 'en' ? flagEn : flagSv }}</span>
            <span class="dropdown-arrow">â–¼</span>
          </div>
        </button>
        <div class="dropdown-menu" [class.show]="showDropdown">
          <div class="dropdown-item-container">
            <button class="dropdown-item" (click)="switchLanguage('en')">
              <div class="dropdown-item-content">
                <span class="flag">{{ flagEn }}</span>
                <span>English</span>
              </div>
            </button>
          </div>
          <div class="dropdown-item-container">
            <button class="dropdown-item" (click)="switchLanguage('sv')">
              <div class="dropdown-item-content">
                <span class="flag">{{ flagSv }}</span>
                <span>Svenska</span>
              </div>
            </button>
          </div>
        </div>
      </div>

      <!-- Theme Toggle -->
      <div class="nav-item-container">
        <button class="icon-btn" (click)="toggleDarkMode()">
          <div class="btn-content">
            {{ isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™' }}
          </div>
        </button>
      </div>

      <!-- Authentication -->
      <div class="auth-section">
        <ng-container *ngIf="!authService.isAuthenticated(); else loggedIn">
          <div class="nav-item-container">
            <a routerLink="/login" class="btn btn-outline" (click)="closeOnNavigate()">
              <div class="btn-content">
                {{ 'login' | translate }}
              </div>
            </a>
          </div>
          <div class="nav-item-container">
            <a routerLink="/register" class="btn btn-primary" (click)="closeOnNavigate()">
              <div class="btn-content">
                {{ 'register' | translate }}
              </div>
            </a>
          </div>
        </ng-container>
        <ng-template #loggedIn>
          <div class="nav-item-container" *ngIf="authService.isAdmin()">
            <a routerLink="/admin/dashboard" class="btn btn-outline" (click)="closeOnNavigate()">
              <div class="btn-content">
                {{ 'adminDashboard' | translate }}
              </div>
            </a>
          </div>
          <div class="nav-item-container">
            <button class="btn btn-secondary" (click)="logout()">
              <div class="btn-content">
                {{ 'logout' | translate }}
              </div>
            </button>
          </div>
        </ng-template>
      </div>

      <!-- Mobile Menu Toggle -->
      <div class="nav-item-container mobile-toggle-wrapper">
        <button class="mobile-toggle" (click)="toggleMenu()">
          <span class="toggle-icon">â˜°</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" [class.show]="!isCollapsed">
    <div class="mobile-menu-content">
      <div class="mobile-item-container">
        <a routerLink="/books" class="mobile-link" (click)="closeOnNavigate()">
          <div class="mobile-link-content">
            {{ 'books' | translate }}
          </div>
        </a>
      </div>
      
      <div class="mobile-item-container">
        <a routerLink="/quotes" class="mobile-link" (click)="closeOnNavigate()">
          <div class="mobile-link-content">
            {{ 'quotes' | translate }}
          </div>
        </a>
      </div>
      
      <div class="mobile-auth">
        <ng-container *ngIf="!authService.isAuthenticated(); else mobileLoggedIn">
          <div class="mobile-item-container">
            <a routerLink="/login" class="btn btn-outline mobile-btn" (click)="closeOnNavigate()">
              <div class="btn-content">
                {{ 'login' | translate }}
              </div>
            </a>
          </div>
          <div class="mobile-item-container">
            <a routerLink="/register" class="btn btn-primary mobile-btn" (click)="closeOnNavigate()">
              <div class="btn-content">
                {{ 'register' | translate }}
              </div>
            </a>
          </div>
        </ng-container>
        <ng-template #mobileLoggedIn>
          <div class="mobile-item-container" *ngIf="authService.isAdmin()">
            <a routerLink="/admin/dashboard" class="btn btn-outline mobile-btn" (click)="closeOnNavigate()">
              <div class="btn-content">
                {{ 'adminDashboard' | translate }}
              </div>
            </a>
          </div>
          <div class="mobile-item-container">
            <button class="btn btn-secondary mobile-btn" (click)="logout()">
              <div class="btn-content">
                {{ 'logout' | translate }}
              </div>
            </button>
          </div>
        </ng-template>
      </div>
      
      <div class="mobile-controls">
        <div class="mobile-item-container">
          <button class="icon-btn mobile-icon-btn" (click)="toggleDarkMode()">
            {{ isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™' }}
          </button>
        </div>
        <div class="mobile-language">
          <div class="mobile-item-container">
            <button class="language-option" (click)="switchLanguage('en')">
              <div class="language-content">
                {{ flagEn }}
              </div>
            </button>
          </div>
          <div class="mobile-item-container">
            <button class="language-option" (click)="switchLanguage('sv')">
              <div class="language-content">
                {{ flagSv }}
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
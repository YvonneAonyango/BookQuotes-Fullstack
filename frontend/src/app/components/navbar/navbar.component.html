<nav class="navbar" [class.dark-mode]="isDarkMode">
  <div class="navbar-container">
    <a routerLink="/" class="navbar-brand">
      <span>ğŸ </span>
      <span>{{ 'brand' | translate }}</span>
    </a>

    <button class="navbar-toggle" (click)="toggleMenu()" [class.active]="!isCollapsed">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="navbar-menu" [class.active]="!isCollapsed">
      <div class="nav-links">
        <a class="nav-link" routerLink="/books" routerLinkActive="active" (click)="isCollapsed = true">
          {{ 'books' | translate }}
        </a>
        <a class="nav-link" routerLink="/quotes" routerLinkActive="active" (click)="isCollapsed = true">
          {{ 'quotes' | translate }}
        </a>
      </div>

      <div class="navbar-controls">
        <div class="mobile-controls-row">
          <div class="language-switcher" #dropdown>
            <button class="language-btn" (click)="toggleDropdown()">
              {{ currentFlag }}
            </button>
            <div class="language-dropdown" [class.show]="showDropdown">
              <button class="language-option" (click)="switchLanguage('en')">
                ğŸ‡¬ğŸ‡§ English
              </button>
              <button class="language-option" (click)="switchLanguage('sv')">
                ğŸ‡¸ğŸ‡ª Swedish
              </button>
            </div>
          </div>

          <button class="theme-btn" (click)="toggleDarkMode()">
            {{ isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™' }}
          </button>
        </div>

        <div class="mobile-auth-buttons">
          <ng-container *ngIf="!authService.isAuthenticated(); else loggedIn">
            <a class="btn btn-login" routerLink="/login" (click)="isCollapsed = true">
              {{ 'login' | translate }}
            </a>
            <a class="btn btn-register" routerLink="/register" (click)="isCollapsed = true">
              {{ 'register' | translate }}
            </a>
          </ng-container>
          <ng-template #loggedIn>
            <button class="btn btn-logout" (click)="logout()">
              {{ 'logout' | translate }}
            </button>
          </ng-template>
        </div>
      </div>
    </div>

    <div class="navbar-controls desktop-controls">
      <div class="language-switcher" #dropdown>
        <button class="language-btn" (click)="toggleDropdown()">
          {{ currentFlag }}
        </button>
        <div class="language-dropdown" [class.show]="showDropdown">
          <button class="language-option" (click)="switchLanguage('en')">
            ğŸ‡¬ğŸ‡§ English
          </button>
          <button class="language-option" (click)="switchLanguage('sv')">
            ğŸ‡¸ğŸ‡ª Swedish
          </button>
        </div>
      </div>

      <button class="theme-btn" (click)="toggleDarkMode()">
        {{ isDarkMode ? 'â˜€ï¸' : 'ğŸŒ™' }}
      </button>

      <ng-container *ngIf="!authService.isAuthenticated(); else loggedInDesktop">
        <a class="btn btn-login" routerLink="/login">{{ 'login' | translate }}</a>
        <a class="btn btn-register" routerLink="/register">{{ 'register' | translate }}</a>
      </ng-container>
      <ng-template #loggedInDesktop>
        <button class="btn btn-logout" (click)="logout()">{{ 'logout' | translate }}</button>
      </ng-template>
    </div>
  </div>
</nav>
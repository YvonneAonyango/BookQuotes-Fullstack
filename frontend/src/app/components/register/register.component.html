<div class="register-page">
  <div class="register-card">
    <div class="card-header">
      <h2>{{ 'createAccount' | translate }}</h2>
    </div>
    <div class="card-body">
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

        <!-- Error Message -->
        <div *ngIf="errorMessage" class="alert alert-danger">
          {{ errorMessage }}
          <button type="button" class="btn-close" (click)="clearMessages()"></button>
        </div>

        <!-- Success Message -->
        <div *ngIf="successMessage" class="alert alert-success">
          {{ successMessage }}
          <button type="button" class="btn-close" (click)="clearMessages()"></button>
        </div>

        <!-- Username Field -->
        <div class="form-group">
          <label>{{ 'username' | translate }}</label>
          <input type="text" formControlName="username" 
                 placeholder="{{ 'enterUsername' | translate }}"
                 [class.is-invalid]="registerForm.get('username')?.invalid && registerForm.get('username')?.touched"
                 [class.is-valid]="registerForm.get('username')?.valid && registerForm.get('username')?.touched">
          <div class="invalid-feedback" *ngIf="registerForm.get('username')?.errors?.['required']">
            {{ 'usernameRequired' | translate }}
          </div>
          <div class="invalid-feedback" *ngIf="registerForm.get('username')?.errors?.['minlength']">
            {{ 'usernameMinLength' | translate }}
          </div>
        </div>

        <!-- Password Field -->
        <div class="form-group">
          <label>{{ 'password' | translate }}</label>
          <input type="password" formControlName="password"
                 placeholder="{{ 'createPassword' | translate }}"
                 [class.is-invalid]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
                 [class.is-valid]="registerForm.get('password')?.valid && registerForm.get('password')?.touched">
          <div class="password-strength" *ngIf="registerForm.get('password')?.value">
            <div class="password-requirement" [class.requirement-met]="passwordErrors.minLength">{{ 'min6Chars' | translate }}</div>
            <div class="password-requirement" [class.requirement-met]="passwordErrors.hasLowercase">{{ 'lowercaseRequired' | translate }}</div>
            <div class="password-requirement" [class.requirement-met]="passwordErrors.hasUppercase">{{ 'uppercaseRequired' | translate }}</div>
            <div class="password-requirement" [class.requirement-met]="passwordErrors.hasNumber">{{ 'numberRequired' | translate }}</div>
            <div class="password-requirement" [class.requirement-met]="passwordErrors.hasSymbol">{{ 'symbolRequired' | translate }}</div>
          </div>
        </div>

        <!-- Confirm Password Field -->
        <div class="form-group">
          <label>{{ 'confirmPassword' | translate }}</label>
          <input type="password" formControlName="confirmPassword"
                 placeholder="{{ 'confirmPassword' | translate }}"
                 [class.is-invalid]="registerForm.get('confirmPassword')?.errors?.['passwordMismatch'] && registerForm.get('confirmPassword')?.touched"
                 [class.is-valid]="!registerForm.get('confirmPassword')?.errors?.['passwordMismatch'] && registerForm.get('confirmPassword')?.touched">
          <div class="invalid-feedback" *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">
            {{ 'confirmPasswordRequired' | translate }}
          </div>
          <div class="invalid-feedback" *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']">
            {{ 'passwordsMismatch' | translate }}
          </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn-register" [disabled]="registerForm.invalid || isLoading">
          <span *ngIf="isLoading" class="spinner"></span>
          {{ isLoading ? ('creatingAccount' | translate) : ('createAccount' | translate) }}
        </button>

        <!-- Login Link -->
        <div class="login-link">
          {{ 'alreadyHaveAccount' | translate }} 
          <a routerLink="/login">{{ 'loginToAccount' | translate }}</a>
        </div>

      </form>
    </div>
  </div>
</div>